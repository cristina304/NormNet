import numpy as np

banana_grasp_pose = np.array([
    [[0, 0, 1], [1, 0, 0], [0, 1, 0]],
    [[0, 0, -1], [0, -1, 0], [-1, 0, 0]],
    [[1, 0, 0], [0, 0, -1], [0, 1, 0]],
    [[1, 0, 0], [0, 0, 1], [0, -1, 0]],
    [[0, -1, 0], [1, 0, 0], [0, 0, 1]],
    [[0, 1, 0],[1, 0, 0],[0, 0, -1]],
])
apple_grasp_pose = np.array([
    [[0, 0, 1], [1, 0, 0], [0, 1, 0]],
    [[0, 0, -1], [0, -1, 0], [-1, 0, 0]],
    [[0, -1, 0], [0, 0, -1], [1, 0, 0]],
    [[0, 1, 0], [0, 0, 1], [1, 0, 0]],
    [[1, 0, 0], [0, 1, 0], [0, 0, 1]],
    [[-1, 0, 0],[0, 1, 0],[0, 0, -1]],
])
hex_nut_grasp_pose = np.array([
    [[0, 0, 1], [1, 0, 0], [0, 1, 0]],
    [[0, 0, -1], [0, -1, 0], [-1, 0, 0]],
    [[1, 0, 0], [0, 0, -1], [0, 1, 0]],
    [[1, 0, 0], [0, 0, 1], [0, -1, 0]],
    [[1, 0, 0], [0, 1, 0], [0, 0, 1]],
    [[-1, 0, 0],[0, 1, 0],[0, 0, -1]],
])
trapezoidal_block_grasp_pose = np.array([
    # [[0, 0, 1], [0, -1, 0], [1, 0, 0]],
    # [[0, 0, -1], [0, 1, 0], [1, 0, 0]],
    [[0, 0, 1], [-1, 0, 0], [0, -1, 0]],
    [[0, 0, -1], [1, 0, 0], [0, -1, 0]],
    [[1, 0, 0], [0, 0, -1], [0, 1, 0]],
    [[1, 0, 0], [0, 0, 1], [0, -1, 0]],
    [[1, 0, 0], [0, 1, 0], [0, 0, 1]],
    # [[-1, 0, 0],[0, 1, 0],[0, 0, -1]],
    [[1, 0, 0],[0, -1, 0],[0, 0, -1]],
])
# wooden_cylinder_grasp_pose = np.array([
#     [[1, 0, 0], [0, 1, 0], [0, 0, 1]],
#     [[-1, 0, 0], [0, 1, 0], [0, 0, -1]],
#     [[1.0, 0.0, 0.0], [0.0, 0.0, -1.0], [0.0, 1.0, 0.0]],
#     [[0.8660254037844386, 0.0, 0.4999999999999999],[0.4999999999999999, 0.0, -0.8660254037844386],[0.0, 1.0, 0.0]],
#     [[0.5000000000000001, 0.0, 0.8660254037844385], [0.8660254037844385, 0.0, -0.5000000000000001], [0.0, 1.0, 0.0]],
#     [[6.123233995736766e-17, 0.0, 1.0], [1.0, 0.0, -6.123233995736766e-17], [0.0, 1.0, 0.0]],
#     [[-0.4999999999999997, 0.0, 0.8660254037844387], [0.8660254037844387, 0.0, 0.4999999999999997], [0.0, 1.0, 0.0]],
#     [[-0.8660254037844386, 0.0, 0.4999999999999999], [0.4999999999999999, 0.0, 0.8660254037844386], [0.0, 1.0, 0.0]],
#     [[-1.0, 0.0, 1.2246467991473532e-16], [1.2246467991473532e-16, 0.0, 1.0], [0.0, 1.0, 0.0]],
#     [[-0.8660254037844385, 0.0, -0.5000000000000001], [-0.5000000000000001, 0.0, 0.8660254037844385], [0.0, 1.0, 0.0]],
#     [[-0.5000000000000003, 0.0, -0.8660254037844383], [-0.8660254037844383, 0.0, 0.5000000000000003], [0.0, 1.0, 0.0]],
#     [[-1.8369701987210297e-16, 0.0, -1.0], [-1.0, 0.0, 1.8369701987210297e-16], [0.0, 1.0, 0.0]],
#     [[0.5, 0.0, -0.8660254037844385], [-0.8660254037844385, 0.0, -0.5], [0.0, 1.0, 0.0]],
#     [[0.8660254037844383, 0.0, -0.5000000000000003], [-0.5000000000000003, 0.0, -0.8660254037844383], [0.0, 1.0, 0.0]],
# ])
wooden_cylinder_grasp_pose = np.array([
    [[1, 0, 0], [0, 1, 0], [0, 0, 1]],
    [[-1, 0, 0], [0, 1, 0], [0, 0, -1]],
    [[0.0, -1.0, 0.0], [0.0, 0.0, -1.0], [1.0, 0.0, 0.0]],
    [[0.0, -0.8660254037844387, 0.49999999999999994], [0.0, -0.49999999999999994, -0.8660254037844387], [1.0, 0.0, 0.0]],
    [[0.0, -0.5000000000000001, 0.8660254037844386], [0.0, -0.8660254037844386, -0.5000000000000001], [1.0, 0.0, 0.0]],
    [[0.0, -6.123233995736766e-17, 1.0], [0.0, -1.0, -6.123233995736766e-17], [1.0, 0.0, 0.0]],
    [[0.0, 0.4999999999999998, 0.8660254037844387], [0.0, -0.8660254037844387, 0.4999999999999998],
    [1.0, 0.0, 0.0]], [[0.0, 0.8660254037844387, 0.49999999999999994], [0.0, -0.49999999999999994, 0.8660254037844387],
    [1.0, 0.0, 0.0]], [[0.0, 1.0, 1.2246467991473532e-16], [0.0, -1.2246467991473532e-16, 1.0], [1.0, 0.0, 0.0]],
    [[0.0, 0.8660254037844386, -0.5000000000000001], [0.0, 0.5000000000000001, 0.8660254037844386], [1.0, 0.0, 0.0]],
    [[0.0, 0.5000000000000004, -0.8660254037844384], [0.0, 0.8660254037844384, 0.5000000000000004], [1.0, 0.0, 0.0]],
     [[0.0, 1.8369701987210297e-16, -1.0], [0.0, 1.0, 1.8369701987210297e-16], [1.0, 0.0, 0.0]],
     [[0.0, -0.5000000000000001, -0.8660254037844386], [0.0, 0.8660254037844386, -0.5000000000000001], [1.0, 0.0, 0.0]],
     [[0.0, -0.8660254037844384, -0.5000000000000004], [0.0, 0.5000000000000004, -0.8660254037844384], [1.0, 0.0, 0.0]]
])

GRASP_POSE_DICT = {
    "apple": apple_grasp_pose,
    "banana": banana_grasp_pose,
    "hex_nut": hex_nut_grasp_pose,
    "trapezoidal_block": trapezoidal_block_grasp_pose,
    "wooden_cylinder": wooden_cylinder_grasp_pose
}
GRASP_OFFSET_DICT = {
    "apple": np.array([0,0,0]),
    "banana": np.array([0,0,-0.010]),
    "hex_nut": np.array([0,0,0]),
    "trapezoidal_block": np.array([0,-0.000,-0.015]),
    # "trapezoidal_block": np.array([0,-0.000,-0.000]),
    "wooden_cylinder": np.array([0,0,0])
}

ID2OBJ = {0:"apple", 1:"banana", 2:"hex_nut", 3:"trapezoidal_block", 4:"wooden_cylinder"}

MECH_EYE_TRANSFORMATION_MATRIX=np.array([
    [0.9979146513598224, 0.0221580157807878, -0.06062483763330029, 0.5852961463611065],
    [0.019624530039612065, -0.9989218916606913, -0.04207056193767156, 0.04200634764514499],
    [-0.06149167766560171, 0.04079309620126187, -0.9972736318985804, 1.1400974681691178],
    [0.0, 0.0, 0.0, 1.0]
])
# MECH_EYE_TRANSFORMATION_MATRIX=np.array([
#     [-0.9979146513598224, -0.0221580157807878, -0.06062483763330029, 0.5852961463611065],
#     [-0.019624530039612065, 0.9989218916606913, -0.04207056193767156, 0.04200634764514499],
#     [0.06149167766560171, -0.04079309620126187, -0.9972736318985804, 1.1400974681691178],
#     [0.0, 0.0, 0.0, 1.0]
# ])
# MECH_EYE_TRANSFORMATION_MATRIX=np.array([
#     [-1, 0, 0, 0.5852961463611065],
#     [0, 1, 0, 0.04200634764514499],
#     [0, 0, -1, 1.1400974681691178],
#     [0.0, 0.0, 0.0, 1.0]
# ])

# THREE_FINGER_GRASP_OFFSET = -0.18835  # 188.35mm
THREE_FINGER_GRASP_OFFSET = -0.192 # 188.35mm
# THREE_FINGER_GRASP_OFFSET = -0. # 188.35mm


def check_rotation_matrix_valid(pose_list):
    for rot_matrix in pose_list:
        print(np.linalg.det(rot_matrix))


if __name__ == '__main__':
    check_rotation_matrix_valid(banana_grasp_pose)

